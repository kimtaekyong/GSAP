<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1" />
    <title>GSAP ScrollTrigger Slide Example</title>
    <link
      rel="stylesheet"
      as="style"
      crossorigin
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css"
    />
    <style>
      * {
        padding: 0;
        margin: 0;
        font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto,
          "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji",
          "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
      }
      body {
        overscroll-behavior: none;
      }
      h2 {
        color: #fff;
        font-size: 28px;
        font-weight: 300;
        line-height: 1.2;
        letter-spacing: -1.25px;
      }
      p {
        color: #fff;
        font-size: 15px;
        font-weight: 500;
        line-height: 1.35;
        letter-spacing: -0.55px;
        margin-top: 8px;
      }
      body {
        height: 100dvh;
        overflow-x: hidden;
        scroll-behavior: smooth;
        background-color: #1f1f1f;
      }

      /* parallax__cont */
      #section7 {
        width: 100%;
      }
      #parallax__cont {
        overflow-x: hidden;
      }
      .parallax__item__num {
        position: absolute;
        right: 14px;
        bottom: 14px;
        font-size: 5vw;
        line-height: 1;
        color: #fff;
        font-weight: 500;
        letter-spacing: 2px;
      }
      .parallax__item {
        width: 100%;
        height: calc(var(--vh, 1vh) * 100);
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      #section7 {
        display: flex;
        align-items: center;
        align-items: c;
      }
      #section7 .parallax__item__text {
        position: absolute;
        left: 50%;
        top: 60%;
        transform: translate(-50%, -50%);
        padding: 38px;
        width: 100%;
        color: #fff;
        font-weight: 800;
        background: #fff;
        max-width: 70%;
        height: 80vh;
        border-radius: 24px;
        row-gap: 6px;
        background-repeat: no-repeat;
        background-position: center center;
        background-size: cover;
      }
      #section7 .parallax__item__text.t1 {
        background-image: url("img/bg_01.jpg");
      }
      #section7 .parallax__item__text.t2 {
        background-image: url("img/bg_02.jpg");
      }
      #section7 .parallax__item__text.t3 {
        background-image: url("img/bg_03.jpg");
      }
      #section8,
      #section6 {
        background-color: #fff;
        width: 100%;
        color: #1f1f1f;
        font-weight: 700;
        height: 100dvh;
        font-size: 18px;
      }
    </style>
  </head>
  <body>
    <section id="section6" class="parallax__item">ì´ì „ì»¨í…ì¸ </section>
    <section id="section7" class="parallax__item">
      <!-- <span class="parallax__item__num">07</span> -->
      <div class="parallax__item__text t1">
        <h2>
          ì•ˆë…•í•˜ì„¸ìš”.
          <br />
          ë³´ëŒìƒì¡° ì…ë‹ˆë‹¤.
        </h2>
        <p>ì „êµ­ ì–´ë””ì—ì„œë‚˜ ë™ì¼í•œ í’ˆê²© ìˆëŠ” <br />ìƒì¡°ì„œë¹„ìŠ¤ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.</p>
      </div>
      <div class="parallax__item__text t2">
        <p>ğŸ˜</p>
        <h2>ë°˜ê°‘ìŠµë‹ˆë‹¤.</h2>
      </div>
      <div class="parallax__item__text t3">
        <p>ğŸ˜˜</p>
        <h2>í˜„ì¬ ì¸í„°ë ‰ì…˜ í…ŒìŠ¤íŠ¸</h2>
      </div>
    </section>
    <!-- //section7 -->
    <section id="section8" class="parallax__item">ë‹¤ìŒì»¨í…ì¸ ì˜ì—­ì…ë‹ˆë‹¤.</section>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.1/ScrollToPlugin.min.js"></script>
    <script>
      // GSAP ë° ScrollTrigger í”ŒëŸ¬ê·¸ì¸ í™œì„±í™”
      gsap.registerPlugin(ScrollTrigger);

      // ëŒ€ìƒ í…ìŠ¤íŠ¸ ì„¹ì…˜ ë°°ì—´
      const texts = ["#section7 .t1", "#section7 .t2", "#section7 .t3"];

      // íƒ€ì„ë¼ì¸ ìƒì„±
      const ani7 = gsap.timeline();

      // ê° í…ìŠ¤íŠ¸ ì„¹ì…˜ì— ëŒ€í•´ ì• ë‹ˆë©”ì´ì…˜ ì •ì˜
      texts.forEach((text, i) => {
        // ì¹´ë“œ ë“±ì¥ ì• ë‹ˆë©”ì´ì…˜ (ì•„ë˜ì—ì„œ ìœ„ë¡œ ì˜¬ë¼ì˜¤ë©° ë“±ì¥)
        ani7.fromTo(
          text,
          { autoAlpha: 0, y: 50, willChange: "opacity, transform" }, // ì´ˆê¸° ìƒíƒœ
          { autoAlpha: 1, y: 0, duration: 2, ease: "power2.out" }, // ë“±ì¥ ì• ë‹ˆë©”ì´ì…˜
          `+=${i === 0 ? 1 : 0.5}` // ì²« ë²ˆì§¸ ì¹´ë“œë§Œ ë”œë ˆì´ ì¶”ê°€
        );

        // ì¹´ë“œ ë‚´ë¶€ í…ìŠ¤íŠ¸ ì• ë‹ˆë©”ì´ì…˜ (h2, p)
        ani7.fromTo(
          `${text} h2`,
          { y: 20, autoAlpha: 0, willChange: "opacity, transform" },
          { y: 0, autoAlpha: 1, duration: 1.5 },
          "-=1.5" // ì¹´ë“œ ë“±ì¥ê³¼ ë™ì‹œì— ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
        );
        ani7.fromTo(
          `${text} p`,
          { y: 20, autoAlpha: 0, willChange: "opacity, transform" },
          { y: 0, autoAlpha: 1, duration: 1.5 },
          "-=1.3"
        );

        // ì¹´ë“œ í‡´ì¥ ì• ë‹ˆë©”ì´ì…˜ (ìœ„ë¡œ ì´ë™í•˜ë©° ì„œì„œíˆ ì‚¬ë¼ì§)
        ani7.to(
          text,
          {
            autoAlpha: 0,
            y: -50,
            duration: 2,
            ease: "power2.in",
          },
          `+=1.5` // ì‚¬ë¼ì§€ê¸° ì‹œì‘í•˜ëŠ” ì‹œì ì„ ì¤‘ì²© ì¡°ì •
        );
      });

      // ScrollTriggerë¡œ íƒ€ì„ë¼ì¸ ì—°ê²°
      ScrollTrigger.create({
        animation: ani7,
        trigger: "#section7", // íŠ¸ë¦¬ê±° ìš”ì†Œ
        start: "top top", // íŠ¸ë¦¬ê±° ì‹œì‘ ìœ„ì¹˜
        end: "+=10000", // íŠ¸ë¦¬ê±° ì¢…ë£Œ ìœ„ì¹˜ (ìŠ¤í¬ë¡¤ ê¸¸ì´)
        scrub: true, // ìŠ¤í¬ë¡¤ê³¼ ì• ë‹ˆë©”ì´ì…˜ ì—°ë™
        pin: true, // ì„¹ì…˜ ê³ ì •
        markers: false, // ë””ë²„ê·¸ ë§ˆì»¤ ë¹„í™œì„±í™”
        anticipatePin: 1, // ê³ ì • ì‹œ ì§€ì—° ë³´ì •
      });
    </script>
    <script>
      function setScreenSize() {
        let vh = window.innerHeight * 0.01;

        document.documentElement.style.setProperty("--vh", `${vh}px`);
      }

      setScreenSize();
    </script>
  </body>
</html>
